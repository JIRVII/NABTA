{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 55, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/%D9%8A%D8%A7%D9%85%D9%8A%D9%83%D8%B3/Documents/GitHub/NABTA/nabta/src/app/api/plantai/route.js"],"sourcesContent":["// src/app/api/plantai/route.js\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function POST(req) {\r\n  try {\r\n    const body = await req.json();\r\n    const userMessage = body.message;\r\n\r\n    if (!userMessage) {\r\n      return NextResponse.json({ error: \"الرسالة فاضية.\" }, { status: 400 });\r\n    }\r\n\r\n    if (!process.env.GOOGLE_API_KEY) {\r\n      return NextResponse.json({ error: \"مفتاح Google API ناقص.\" }, { status: 500 });\r\n    }\r\n\r\n    const url = https//generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${process.env.GOOGLE_API_KEY};\r\n\r\n    const payload = {\r\n      contents: [{ parts: [{ text: userMessage }] }],\r\n      generationConfig: {\r\n        temperature: 0.7,\r\n        maxOutputTokens: 500,\r\n      },\r\n    };\r\n\r\n    const r = await fetch(url, {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify(payload),\r\n    });\r\n\r\n    const data = await r.json();\r\n\r\n    // جرّب نطلع الرد\r\n    let reply =\r\n      data?.candidates?.[0]?.content?.parts?.[0]?.text ||\r\n      data?.candidates?.[0]?.output ||\r\n      data?.output?.[0]?.content ||\r\n      data?.error?.message ||\r\n      \"ما لقيت رد من API.\";\r\n\r\n    return NextResponse.json({ reply });\r\n  } catch (err) {\r\n    return NextResponse.json(\r\n      { error: \"خطأ في السيرفر: \" + err.message },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,+BAA+B;;;;;AAC/B;;AAEO,eAAe,KAAK,GAAG;IAC5B,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,cAAc,KAAK,OAAO;QAEhC,IAAI,CAAC,aAAa;YAChB,OAAO,yLAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAiB,GAAG;gBAAE,QAAQ;YAAI;QACtE;QAEA,IAAI,CAAC,QAAQ,GAAG,CAAC,cAAc,EAAE;YAC/B,OAAO,yLAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAyB,GAAG;gBAAE,QAAQ;YAAI;QAC9E;QAEA,MAAM,MAAM,MAAK,+GAA+G;;QAEhI,MAAM,UAAU;YACd,UAAU;gBAAC;oBAAE,OAAO;wBAAC;4BAAE,MAAM;wBAAY;qBAAE;gBAAC;aAAE;YAC9C,kBAAkB;gBAChB,aAAa;gBACb,iBAAiB;YACnB;QACF;QAEA,MAAM,IAAI,MAAM,MAAM,KAAK;YACzB,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,MAAM,OAAO,MAAM,EAAE,IAAI;QAEzB,iBAAiB;QACjB,IAAI,QACF,MAAM,YAAY,CAAC,EAAE,EAAE,SAAS,OAAO,CAAC,EAAE,EAAE,QAC5C,MAAM,YAAY,CAAC,EAAE,EAAE,UACvB,MAAM,QAAQ,CAAC,EAAE,EAAE,WACnB,MAAM,OAAO,WACb;QAEF,OAAO,yLAAY,CAAC,IAAI,CAAC;YAAE;QAAM;IACnC,EAAE,OAAO,KAAK;QACZ,OAAO,yLAAY,CAAC,IAAI,CACtB;YAAE,OAAO,qBAAqB,IAAI,OAAO;QAAC,GAC1C;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}